{% comment %}
#
#   Liquid variables are created at the top to keep the source DRY and clean.
#   Idea by ericcarlisle.com
#
#   Variables › {{ url }} › site.url + site.baseurl
#   Variables › {{ description }} › excerpt, page.meta_description, or site.description
#   Variables › {{ title }} › page.title
#
{% endcomment %}{% capture ignore %}

{% assign url = site.baseurl | prepend: site.url %}

{% capture description %}{% if page.meta_description %}{{ page.meta_description }}{% elsif page.teaser %}{{ page.teaser }}{% elsif page.excerpt %}{{ page.excerpt }}{% elsif site.description %}{{ site.description }}{% endif %}{% endcapture %}
{% assign description = description | strip_html | escape | strip %}

{% capture title %}{% if page.meta_title %}{{ page.meta_title}}{% elsif page.title %}{{ page.title }}{% else %}{{ site.title | strip_html | strip }}{% endif %}{% endcapture %}

{% assign title = title | strip_html | escape | strip_newlines %}

{% endcapture %}<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{{ title }}</title>
	<link rel="stylesheet" type="text/css" href="{{ url }}/assets/css/styles_feeling_responsive.css">
	<script src="{{ url }}/assets/js/modernizr.min.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
	<script>
		WebFont.load({
			google: {
				families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ]
			}
		});
	</script>

	<noscript>
		<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic%7CVolkhov' rel='stylesheet' type='text/css'>
	</noscript>


	<!-- Search Engine Optimization -->
	<meta name="description" content="{{ description }}">
  	{% if site.google_site_verification %}<meta name="google-site-verification" content="{{ site.google_site_verification}}">{% endif %}
	{% if site.bing_webmastertools_id %}<meta name="msvalidate.01" content="{{ site.bing_webmastertools_id }}" >{% endif %}
	{% if site.google_author %}<link rel="author" href="{{ site.google_author }}">{% endif %}
	{% if site.alexa_verify_id %}<meta name="alexaVerifyID" content="{{ site.alexa_verify_id }}">{% endif %}
	{% if page.noindex == true %}<meta name="robots" content="noindex">{% endif %}


	<!-- Facebook Open Graph -->
	<meta property="og:title" content="{{ title }}">
	<meta property="og:description" content="{{ description }}">
	<meta property="og:url" content="{{ url }}{{ page.url }}">
	<meta property="og:locale" content="{% if site.og_locale == nil %}en_EN{% else %}{{ site.og_locale }}{% endif %}">
	<meta property="og:type" content="website">
	<meta property="og:site_name" content="{{ site.title }}">
	{% if page.image.title %}<meta property="og:image" content="{{ site.urlimg }}{{ page.image.title }}">{% endif %}
	{% if site.socialmedia.facebook %}<meta property="article:author" content="https://www.facebook.com/{{ site.socialmedia.facebook }}">{% endif %}


	{% if site.socialmedia.twitter %}
	<!-- Twitter -->
	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="{{ site.socialmedia.twitter }}">
	<meta name="twitter:creator" content="{{ site.socialmedia.twitter }}">
	<meta name="twitter:title" content="{{ title }}">
	<meta name="twitter:description" content="{{ description }}">
	{% if page.image.title %}<meta name="twitter:image" content="{{ site.urlimg }}{{ page.image.title }}">{% endif %}
	{% endif %}

	<link type="text/plain" rel="author" href="{{ url}}/humans.txt">
    
    {% if page.mediaplayer == true or page.googlesheetpull == true %}
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    {% endif %}
    	
	{% if page.googlesheetpull == true %}



	<script type="text/javascript">
	    var layout_html = null;		
		function load_layout_data(json) {
		    var layout_data_list = json.feed.entry;
		    
		    var layout_label_list = [];
		    var layout_html_list = [];	    
			$.each(layout_data_list, function ( index, layout_data ) {
				var cell = layout_data["gs$cell"];
				var cell_contents = cell["$t"];
								
				if (cell.row == 1) {
					layout_label_list.push(cell_contents);
				}		
				if (cell.row == 2) {
					layout_html_list.push(cell_contents);
				}
			});
			
		    $.each(layout_label_list, function ( index, layout_label ) {
				if (layout_label == "{{ page.googlesheetlayout }}") {
					layout_html = layout_html_list[index];
					return false;
				}
			});
		}
		
		var obj_class_list = [];
		var html_list = [];		
		function load_content_data(json) {
			var content_data_list = json.feed.entry;
			
			$.each(content_data_list, function ( index, content_data ) {
				var cell = content_data["gs$cell"];
				var cell_contents = cell["$t"];
								
				if (cell.row == 1) {
					obj_class_list.push(cell_contents);
				}		
				if (cell.row == 2) {
					html_list.push(cell_contents);
				}		
			});
		}
		
		function write_layout() {
		    var parent = $(".google-sheet-layout");
		    parent.append(layout_html);
		}
		
		function write_content() {
		    	$.each(obj_class_list, function ( index, obj_class ) {
				var parent = $("." + obj_class);
				if (parent.length > 0) {
					parent.append(html_list[index]);
				}
			});
		}
		
		function write_google_document() {
			parent = $(".google_docs_load");
			if (parent.length > 0) {
				var wiki_contents = $.get("https://raw.githubusercontent.com/wiki/SimonBiggs/jekyll-google-drive/Playgroup.md");
				parent.append(wiki_contents);
			}
		}
		
		$(document).ready(function(){
		    	write_layout();
			write_content();
			write_google_document();
		});
	
	</script>
	<script src="https://spreadsheets.google.com/feeds/cells/{{ site.google_sheet_layout_id }}/public/values?alt=json-in-script&callback=load_layout_data"></script>
	<script src="https://spreadsheets.google.com/feeds/cells/{{ site.google_sheet_contents_id }}/public/values?alt=json-in-script&callback=load_content_data"></script>
    {% endif %}

	{% if page.mediaplayer == true %}

		
<script src="{{ url }}/assets/mediaelement_js/mediaelement-and-player.min.js"></script>
		<link rel="stylesheet" href="{{ url }}/assets/mediaelement_js/mediaelementplayer.min.css">
     
	{% endif %}

	{% include _favicon.html %}

	{% unless page.style == NULL %}
	<style type="text/css">{{ page.style }}</style>
	{% endunless %}
